<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhuyebao.mapper.InstitutionMapper">

    <select id="getAllJob" resultType="com.zhuyebao.obj.Job">
        select * from job
            <where>
                <if test="institutionId != null">
                    institution_id = #{institutionId}
                </if>
                <if test="state != 0">
                    and state = #{state}
                </if>
            </where>
    </select>
    <select id="getAllActivity" resultType="com.zhuyebao.obj.Campus">
        select * from campus_will
        <where>
            <if test="institutionId != null">
                institution_id = #{institutionId}
            </if>

            <if test="state != 0">
                AND state = #{state}
            </if>
        </where>
    </select>

    <update id="updateJob">
        update job
            <set>
                <if test="name != null">
                    name=#{name}
                </if>
                <if test="time != null">
                    ,time=#{time}
                </if>
                <if test="content != null">
                    ,content=#{content}
                </if>
                <if test="place != null">
                    ,place=#{place}
                </if>
                <if test="demand != null">
                    ,demand=#{demand}
                </if>
                <if test="phone != null">
                    ,phone=#{phone}
                </if>
                <if test="institutionId != null">
                    ,institution_id=#{institutionId}
                </if>
                <if test="salary != null">
                    ,salary=#{salary}
                </if>
            </set>
             ,state=#{state} where id=#{id}
    </update>
    <update id="updateCampus">
        update campus_will set
        <if test="name != null">
            name=#{name}
        </if>
        <if test="time != null">
            ,time=#{time}
        </if>
        <if test="content != null">
            ,content=#{content}
        </if>
        <if test="place != null">
            ,place=#{place}
        </if>
        <if test="goods != null">
            ,goods=#{goods}
        </if>
        <if test="number != null">
            ,number=#{number}
        </if>
        <if test="institutionId != null">
            ,institution_id=#{institutionId}
        </if>
        <if test="group != null">
            ,`group`=#{group}
        </if>
        ,state=#{state} where id=#{id}
    </update>
    <update id="updatePartInfo">
        update institution
        <set>
            <if test="name != null">
                name=#{name},
            </if>
            <if test="email != null">
                email=#{email},
            </if>
        </set>
    </update>

</mapper>